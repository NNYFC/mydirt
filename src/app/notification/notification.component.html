<!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
<header>
  <div class="wrapper">
    <div class="logo">
      <img src="../../assets/dustbins.jpg" width="100" height="100" alt="">
    </div>
    <ul class="nav-area">
      <li>
        <a href="" routerLink="/home" >Home
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-fill" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293l6-6zm5-.793V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"/>
            <path fill-rule="evenodd" d="M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z"/>
          </svg>
        </a>
      </li>
      <li *ngIf="userType == 'admin'">
        <a href="" routerLink="/drivers">Drivers
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-car-front-fill" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M2.52 3.515A2.5 2.5 0 0 1 4.82 2h6.362c1 0 1.904.596 2.298 1.515l.792 1.848c.075.175.21.319.38.404.5.25.855.715.965 1.262l.335 1.679c.033.161.049.325.049.49v.413c0 .814-.39 1.543-1 1.997V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.338c-1.292.048-2.745.088-4 .088s-2.708-.04-4-.088V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.892c-.61-.454-1-1.183-1-1.997v-.413a2.5 2.5 0 0 1 .049-.49l.335-1.68c.11-.546.465-1.012.964-1.261a.807.807 0 0 0 .381-.404l.792-1.848ZM3 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm10 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM6 8a1 1 0 0 0 0 2h4a1 1 0 1 0 0-2H6ZM2.906 5.189l.956-1.913A.5.5 0 0 1 4.309 3h7.382a.5.5 0 0 1 .447.276l.956 1.913a.51.51 0 0 1-.497.731c-.91-.073-3.35-.17-4.597-.17-1.247 0-3.688.097-4.597.17a.51.51 0 0 1-.497-.731Z"/>
          </svg>
        </a>
      </li>
      <li *ngIf="userType == 'admin'">
        <a href="" routerLink="/dustbin">Dustbin
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash-fill" viewBox="0 0 16 16">
            <path d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"/>
          </svg>
        </a>
      </li>
      <li class="active">
        <a href="" routerLink="/notification">Notification
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-fill" viewBox="0 0 16 16">
            <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.801V4.697l-5.803 3.546Z"/>
          </svg>
        </a>
      </li>
      <li>
        <div class="dropdown">
          <button class="dropbtn">Setting</button>
          <div class="dropdown-content">

            <a routerLink="/profile" href="">Profile
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-person-fill" viewBox="0 0 16 16">
                <path d="M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm-1 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm-3 4c2.623 0 4.146.826 5 1.755V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-1.245C3.854 11.825 5.377 11 8 11z"/>
              </svg>
            </a>
            <a href="" (click)="logout()">Logout
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-door-open-fill" viewBox="0 0 16 16">
                <path d="M1.5 15a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1H13V2.5A1.5 1.5 0 0 0 11.5 1H11V.5a.5.5 0 0 0-.57-.495l-7 1A.5.5 0 0 0 3 1.5V15H1.5zM11 2h.5a.5.5 0 0 1 .5.5V15h-1V2zm-2.5 8c-.276 0-.5-.448-.5-1s.224-1 .5-1 .5.448.5 1-.224 1-.5 1z"/>
              </svg>
            </a>

          </div>
        </div>
      </li>
    </ul>
  </div>
  <div class="welcome-text">

    <div>
      <button (click)="refreshData()" class="open-button1">Refresh</button>
    </div>
    <!--Spinner-->
    <div *ngIf="loaderShow!=false" class="d-flex justify-content-center">
      <div class="spinner-border text-success" style="width: 6rem; height: 6rem;" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
    <!--End Spinner-->

    <h1>List of Notifications</h1>
    <br>
    <table *ngIf="userType != 'admin'" class="table-evenodd">
      <thead>
      <tr>
        <th>N°</th>
        <th>Send Date</th>
        <th>Dustbin</th>
        <th>Place</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let drivernotification of drivernotificationList;let i = index">
        <td>{{i+1}}</td>
        <td>{{drivernotification.date_asign}}</td>
        <td>{{drivernotification.iddustbin.dustbin_name}}</td>
        <td>{{drivernotification.iddustbin.idplace.place_name}}</td>
      </tr>
      </tbody>
    </table>

    <table *ngIf="userType == 'admin'" class="table-evenodd">
      <thead>
      <tr>
        <th>N°</th>
        <th>Send date</th>
        <th>Place</th>
        <th>Images</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let notification of notificationList;let i = index">
        <td>{{i+1}}</td>
        <td>{{notification.datesend}}</td>
        <td>{{notification.idplace.place_name}}</td>
        <td>
          <svg  (click)="getMsgDetails(notification)" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-fill" viewBox="0 0 16 16">
            <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/>
            <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"/>
          </svg>
        </td>
      </tr>
      </tbody>
    </table>

    <!--Popup Form-->
    <div class="formadd-popup" id="myForm" *ngIf="detailsShow">
      <form class="formadd" >
        <h2>Add A Dustbin</h2>

        <label for="message"><b>Message</b></label>
        <div>{{selectedNotification.message}}</div>
        <br>
        <label for="image"><b>Images</b></label>
        <br>
        <img *ngFor="let image of imageList;let j = index" class="imgpic" src={{image.picture}} />

        <button type="button" class="btn cancel" (click)="closeDetail()">Close</button>
      </form>
    </div>
    <!--Popup Form-->

    <div *ngIf="userType == 'admin'">
      <button class="open-button" (click)="openForm()">Asign Dustbin to Driver</button>
    </div>

    <!--Popup Form-->
    <div class="formadd-popup" id="myForm" *ngIf="formShow">
      <form class="formadd"  [formGroup]="asignDriverForm" (ngSubmit)="asignSubmited()">
        <h2>Add A Dustbin</h2>

        <label for="driver"><b>Driver</b></label>
        <select name="dog-names" id="dog-names" formControlName="iddriver">
          <option *ngFor="let driver of driverList" value="{{driver.iddriver}}">{{driver.first_name}} {{driver.last_name}}</option>
        </select>
        <br>
        <br>
        <label for="dustbin"><b>Dustbin</b></label>
        <select name="dog-names" id="dog-names" formControlName="iddustbin">
          <option *ngFor="let dustbin of dustbinList" value="{{dustbin.iddustbin}}">{{dustbin.dustbin_name}}</option>
        </select>
        <br>
        <br>
        <button type="submit" class="btn">Asign</button>
        <button type="button" class="btn cancel" (click)="openForm()">Close</button>
      </form>
    </div>
    <!--Popup Form-->

  </div>
</header>

